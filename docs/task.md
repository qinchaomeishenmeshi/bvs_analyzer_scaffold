# BVS Analyzer - 项目任务清单

本文档根据《PRD.md》制定，旨在将产品需求分解为可执行的开发任务。

## 第一阶段：核心功能开发 (MVP)

### 任务 1：视频数据抓取模块 (`crawler`)
- [ ] **1.1: 实现视频下载功能**
  - [ ] 调研并集成 `yt-dlp`，支持通过视频链接下载抖音、快手、B站的视频。
  - [ ] 封装下载逻辑到 `crawler/video_downloader.py` 中。
  - [ ] 支持将视频和封面保存到指定目录。
- [ ] **1.2: 实现视频元数据提取**
  - [ ] 在下载视频的同时，提取并保存视频的元数据（如标题、作者、发布时间、点赞数等）为 JSON 文件。

### 任务 2：视频文本提取模块 (`parser`)
- [ ] **2.1: 音频提取与转写**
  - [ ] 使用 `ffmpeg` 从下载的视频中提取音频。
  - [ ] 集成 `openai-whisper` 将音频转写为带时间戳的字幕文本 (SRT/JSON)。
  - [ ] 将该功能封装在 `parser/audio_parser.py` 中。

### 任务 3：报告生成模块 (`report`)
- [ ] **3.1: 生成基础分析报告**
  - [ ] 创建 `report/report_generator.py`。
  - [ ] 将视频元数据和转写的字幕整合到一个 Markdown 文件中。
  - [ ] 报告应包含视频基本信息和完整的字幕文本。

## 第二阶段：深度分析与结构化

### 任务 4：视频结构分析模块 (`parser`)
- [ ] **4.1: 镜头切分分析**
  - [ ] 使用 `opencv-python` 对视频进行场景/镜头切分，记录时间点。
  - [ ] 将功能添加到 `parser/video_parser.py`。
- [ ] **4.2: 关键钩子识别**
  - [ ] 分析字幕文本，识别前3秒的关键钩子（如疑问、反转）。
  - [ ] 将该功能封装在 `nlp/hook_analyzer.py` 中。

### 任务 5：报告内容增强
- [ ] **5.1: 结构化报告输出**
  - [ ] 在 Markdown 报告中，根据镜头切分和字幕时间戳，将内容分段展示。
  - [ ] 突出显示开头的“钩子”部分。

## 第三阶段：模板匹配与可选功能

### 任务 6：模板匹配模块 (`templates`)
- [ ] **6.1: 定义结构模板**
  - [ ] 在 `templates/` 目录下定义几种常见的视频结构（如起承转合、并列式）。
- [ ] **6.2: 实现模板匹配**
  - [ ] 开发算法，将分析出的视频结构与预定义模板进行匹配。

### 任务 7：(可选) Web 界面模块 (`ui`)
- [ ] **7.1: 搭建 Web 服务**
  - [ ] 使用 `Streamlit` 或 `Flask` 搭建一个简单的 Web 界面。
- [ ] **7.2: 实现前端交互**
  - [ ] 提供输入框，允许用户提交视频链接。
  - [ ] 在页面上展示生成的分析报告。

---

**实施建议：**
1.  **优先完成第一阶段**，确保核心流程（下载 -> 转写 -> 报告）跑通。
2.  每个任务完成后，进行单元测试，确保功能稳定。
3.  在 `app.py` 中串联各个模块，作为主入口程序。